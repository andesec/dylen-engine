# Dylen Service Configuration

# Runtime environment identity (required by startup env contract)
DYLEN_ENV=development

# CORS
DYLEN_ALLOWED_ORIGINS=https://dev.dylen.app

# AI Model Configuration: Loaded from runtime_config_values database table
# Models are database-configurable per-scope (GLOBAL, TENANT, TIER, USER)
# See: app/services/runtime_config.py for helper functions and fallback defaults

# Illustration assets
DYLEN_ILLUSTRATION_BUCKET=dylen-illustrations
GCS_STORAGE_HOST=

# Research configuration
DYLEN_RESEARCH_SEARCH_MAX_RESULTS=5

# API Keys (REQUIRED)
GEMINI_API_KEY=your_gemini_api_key_here
TAVILY_API_KEY=your_tavily_api_key_here
# OpenRouter is used when DYLEN_*_PROVIDER=openrouter or when the request selects OpenRouter models.
OPENROUTER_API_KEY=your_openrouter_api_key_here
# Optional OpenRouter attribution headers.
# OPENROUTER_HTTP_REFERER=https://your-app.example
# OPENROUTER_TITLE=YourAppName

# Local testing: serve dummy model output from a file to avoid API calls.
DYLEN_USE_DUMMY_PLANNER_RESPONSE=false
DYLEN_DUMMY_PLANNER_RESPONSE_PATH=./fixtures/dummy_planner_response.md
DYLEN_USE_DUMMY_OUTCOMES_RESPONSE=false
DYLEN_DUMMY_OUTCOMES_RESPONSE_PATH=./fixtures/dummy_outcomes_response.md
DYLEN_USE_DUMMY_SECTION_BUILDER_RESPONSE=false
DYLEN_DUMMY_SECTION_BUILDER_RESPONSE_PATH=./fixtures/dummy_section_builder_response.md
DYLEN_USE_DUMMY_REPAIRER_RESPONSE=false
DYLEN_DUMMY_REPAIRER_RESPONSE_PATH=./fixtures/dummy_repairer_response.md


# Postgres Audit (optional)
# DATABASE_URL is an alias/standard variable, often mapped to DYLEN_PG_DSN in deployment.
DATABASE_URL=postgresql://<user>:<password>@localhost:5432/<database>
DYLEN_PG_DSN=postgresql://<user>:<password>@localhost:5432/<database>
DYLEN_PG_CONNECT_TIMEOUT=5
DYLEN_LLM_AUDIT_ENABLED=false

# Schema & Prompts
DYLEN_SCHEMA_VERSION=1.0
DYLEN_PROMPT_VERSION=v1

# Optional Configuration
DYLEN_DEBUG=false

# Logging configuration
# DYLEN_LOG_MAX_BYTES=5242880
# DYLEN_LOG_BACKUP_COUNT=10


# Firebase & Authentication
# -------------------------
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_SERVICE_ACCOUNT_JSON_PATH=/path/to/serviceAccountKey.json

# Notifications (Email via MailerSend API)
# ---------------------------------------
# Disabled by default; enable only when fully configured.
DYLEN_EMAIL_NOTIFICATIONS_ENABLED=false
DYLEN_EMAIL_PROVIDER=mailersend
DYLEN_EMAIL_FROM_ADDRESS=no-reply@example.com
DYLEN_EMAIL_FROM_NAME=Dylen
DYLEN_MAILERSEND_API_KEY=your_mailersend_api_key_here
DYLEN_MAILERSEND_TIMEOUT_SECONDS=10
# Override only if you need a proxy or alternate endpoint.
DYLEN_MAILERSEND_BASE_URL=https://api.mailersend.com/v1

# Notifications (Web Push via VAPID)
# ----------------------------------
# Keep disabled unless both VAPID keys and subject are configured.
DYLEN_PUSH_NOTIFICATIONS_ENABLED=false
# Public VAPID key (safe to share with frontend config).
DYLEN_PUSH_VAPID_PUBLIC_KEY=your_vapid_public_key_here
# Private VAPID key (server secret, never expose to clients).
DYLEN_PUSH_VAPID_PRIVATE_KEY=your_vapid_private_key_here
# Must start with mailto: or https://.
DYLEN_PUSH_VAPID_SUB=mailto:alerts@example.com
